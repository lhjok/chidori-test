"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{74022:function(e,t,r){r.r(t);var a=r(85893),s=r(7963),n=r(96557),i=r(14225),o=r(6089),d=r(66712),c=r(91170),l=r(4040),u=r(78230),p=r(6913),g=r(54306),h=r(16735),f=r(99019),m=r(35959),w=r(67294),j=r(77191),x=r(87066);t.default=()=>{let{select:e,wallets:t,publicKey:r,disconnect:y,signTransaction:k}=(0,g.O)(),A=(0,s.p)(),b=(0,w.useRef)(),E=r?r.toBase58():"",z=m.RG.generate(),v=m.RG.generate(),C=j.encode(z.secretKey),R=j.encode(v.secretKey),S=async e=>{let t=x.Z.post("/solana/sign",{from:e.toBase58(),puppet:R,nonce:C},{timeout:18e5}).then(e=>e.data).catch(e=>{if(412===e.response.status)throw Error("412");throw Error(e.message)}),r=await t,a=j.decode(r),s=m.YW.from(a);if(!k)throw Error("Signature failed");return await k(s)},_=async e=>{let t=v.publicKey.toBase58();b.current=A({title:"Airdrop Pending",description:"Please wait...",status:"loading",duration:null});try{let r=await S(e),a=j.encode(r.serialize());A.update(b.current,{title:"Airdrop Pending",description:"Applying...",status:"loading",duration:null});let s=x.Z.post("/solana/send",{from:e.toBase58(),puppet:t,sign_tx:a},{timeout:18e5}).then(e=>e.data).catch(e=>{throw Error(e.message)}),n=await s;if("success"===n.status){A.update(b.current,{title:"Airdrop Succeed",description:n.message,status:"success",duration:6e3}),y();return}A.update(b.current,{title:"Airdrop Failed",description:"Unknown error please try again",status:"error",duration:3e3}),y()}catch(e){console.log("RequestFailed:",e.message),"412"===e.message?A.update(b.current,{title:"Airdrop Failed",description:"You are not eligible for airdrop",status:"error",duration:3e3}):A.update(b.current,{title:"Airdrop Failed",description:"Unknown error please try again",status:"error",duration:3e3}),y()}};return r?(0,a.jsxs)(n.g,{gap:4,mb:2,children:[(0,a.jsxs)(d.v,{children:[(0,a.jsx)(c.j,{as:i.z,rightIcon:(0,a.jsx)(p.v,{}),children:E.substring(0,4).concat("...",E.substring(E.length-4,E.length))}),(0,a.jsx)(l.q,{children:(0,a.jsx)(u.s,{onClick:y,children:"Disconnect"})})]}),(0,a.jsx)(i.z,{onClick:async()=>{await _(r)},children:"Receive Airdrop"})]}):(0,a.jsx)(n.g,{gap:4,children:t.filter(e=>"Installed"===e.readyState).length>0?t.filter(e=>"Installed"===e.readyState).map(t=>(0,a.jsx)(i.z,{w:"64",size:"lg",fontSize:"md",onClick:()=>e(t.adapter.name),leftIcon:(0,a.jsx)(o.E,{h:6,w:6,src:t.adapter.icon,alt:t.adapter.name}),children:t.adapter.name},t.adapter.name)):(0,a.jsxs)(n.g,{gap:4,children:[(0,a.jsx)(h.a,{}),(0,a.jsx)(f.v,{})]})})}}}]);